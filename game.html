<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>í”Œë˜ì‹œ ê²Œì„</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="í”Œë˜ì‹œ ê²Œì„ì„Browserì—ì„œ ë°”ë¡œ í”Œë ˆì´" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ®</text></svg>" />
  <link rel="canonical" href="https://flashgame.example.com/game.html" />

  <style>
    * {
      box-sizing: border-box;
    }
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      background: #0f172a;
      color: #e2e8f0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    header {
      padding: 14px 20px;
      border-bottom: 1px solid #1e293b;
      display: flex;
      align-items: center;
      gap: 16px;
      background: #0f172a;
      position: sticky;
      top: 0;
      z-index: 10;
    }
    header a {
      color: #94a3b8;
      text-decoration: none;
      font-size: 14px;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 8px 12px;
      border-radius: 8px;
      transition: all 0.2s;
    }
    header a:hover {
      color: #22c55e;
      background: #1e293b;
    }
    header h1 {
      margin: 0;
      font-size: 18px;
      flex: 1;
      color: #f8fafc;
      font-weight: 600;
    }
    main {
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
      width: 100%;
      flex: 1;
    }
    .game-header {
      margin-bottom: 16px;
    }
    .game-title {
      font-size: 24px;
      font-weight: 700;
      color: #f8fafc;
      margin: 0 0 8px;
    }
    .meta {
      font-size: 14px;
      color: #94a3b8;
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }
    .meta .category {
      background: #1e293b;
      padding: 4px 10px;
      border-radius: 6px;
      font-size: 12px;
      color: #22c55e;
    }
    .tags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 12px;
    }
    .tag {
      font-size: 12px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid #334155;
      color: #94a3b8;
      background: #1e293b;
    }
    .game-frame-wrap {
      background: #000;
      border-radius: 16px;
      overflow: hidden;
      border: 2px solid #1e293b;
      box-shadow: 0 4px 24px rgba(0,0,0,0.4);
    }
    .game-frame-inner {
      width: 100%;
      height: 520px;
      background: #000;
    }
    @media (max-width: 640px) {
      .game-frame-inner {
        height: 300px;
      }
      .game-title {
        font-size: 20px;
      }
    }
    .desc {
      margin-top: 20px;
      font-size: 15px;
      color: #cbd5e1;
      line-height: 1.6;
      padding: 16px;
      background: #1e293b;
      border-radius: 12px;
      border: 1px solid #334155;
    }
    .back-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: #94a3b8;
      text-decoration: none;
      font-size: 14px;
      padding: 8px 16px;
      border-radius: 8px;
      transition: all 0.2s;
    }
    .back-btn:hover {
      background: #1e293b;
      color: #22c55e;
    }
    footer {
      padding: 20px;
      text-align: center;
      border-top: 1px solid #1e293b;
      background: #0f172a;
      color: #64748b;
      font-size: 13px;
    }
    footer a {
      color: #22c55e;
      text-decoration: none;
    }
    footer a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <header>
    <a href="index.html">
      <span>â†</span> ëª©ë¡ìœ¼ë¡œ
    </a>
    <h1 id="gameTitle">í”Œë˜ì‹œ ê²Œì„</h1>
  </header>

  <main>
    <div class="game-header">
      <h2 id="gameTitleDisplay" class="game-title"></h2>
      <div class="meta">
        <span class="category" id="gameCategory"></span>
        <span id="gameId"></span>
      </div>
      <div class="tags" id="tagList"></div>
    </div>

    <div class="game-frame-wrap">
      <div id="gamePlayer" class="game-frame-inner">
        <div style="display:flex;align-items:center;justify-content:center;height:100%;color:#64748b;">
          ê²Œì„ ë¡œë”© ì¤‘...
        </div>
      </div>
    </div>

    <div class="desc" id="gameDesc"></div>
    
    <div style="margin-top: 20px;">
      <a href="index.html" class="back-btn">â† ê²Œì„ ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
    </div>
  </main>

  <footer>
    <p>Â© 2026 í”Œë˜ì‹œ ê²Œì„ ëª¨ìŒ | <a href="index.html">í™ˆìœ¼ë¡œ</a></p>
  </footer>

  <script>
    const BASE_TAGS = [
      "í”Œë˜ì‹œê²Œì„", "í”Œë˜ì‹œ", "flash game", "ruffle",
      "ê³ ì „ê²Œì„", "ì¶”ì–µì˜ê²Œì„", "ì˜›ë‚ ê²Œì„",
      "ì›¹ê²Œì„", "ë¬´ë£Œê²Œì„", "ì˜¨ë¼ì¸ê²Œì„"
    ];

    function getSlugFromUrl() {
      const params = new URLSearchParams(window.location.search);
      return params.get('slug');
    }

    async function loadGame() {
      const slug = getSlugFromUrl();
      const titleEl = document.getElementById('gameTitle');
      const titleDisplay = document.getElementById('gameTitleDisplay');

      if (!slug) {
        titleEl.textContent = 'ì˜ëª»ëœ ì ‘ê·¼';
        titleDisplay.textContent = 'ì˜ëª»ëœ ì ‘ê·¼ì…ë‹ˆë‹¤.';
        return;
      }

      try {
        const res = await fetch('games.json');
        const games = await res.json();
        const game = games.find(g => g.slug === slug);

        if (!game) {
          titleEl.textContent = 'ê²Œì„ ì—†ìŒ';
          titleDisplay.textContent = 'ê²Œì„ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';
          return;
        }

        document.title = `${game.title} - í”Œë˜ì‹œ ê²Œì„`;
        titleEl.textContent = game.title;
        titleDisplay.textContent = game.title;
        
        // Category
        const categoryEl = document.getElementById('gameCategory');
        categoryEl.textContent = game.category || 'í”Œë˜ì‹œê²Œì„';
        
        // ID
        document.getElementById('gameId').textContent = `ID: ${game.id}`;

        // Description
        const descEl = document.getElementById('gameDesc');
        if (game.description && game.description.trim()) {
          descEl.textContent = game.description;
        } else {
          descEl.textContent = 'í”Œë˜ì‹œ ê¸°ë°˜ ê³ ì „ ì›¹ê²Œì„ì…ë‹ˆë‹¤. ë°”ë¡œ í”Œë ˆì´í•´ë³´ì„¸ìš”!';
        }

        // Tags
        const tagList = document.getElementById('tagList');
        [...BASE_TAGS, game.title].slice(0, 6).forEach(t => {
          const span = document.createElement('span');
          span.className = 'tag';
          span.textContent = t;
          tagList.appendChild(span);
        });

        // SWF player
        const swfPath = `/swf/${encodeURIComponent(game.filename)}`;
        const player = document.getElementById('gamePlayer');
        player.innerHTML = `
          <object data="${swfPath}"
                  type="application/x-shockwave-flash"
                  width="100%" height="100%">
            <param name="movie" value="${swfPath}">
            <param name="allowScriptAccess" value="sameDomain">
            <param name="allowFullScreen" value="true">
            <embed src="${swfPath}"
                   width="100%" height="100%"
                   allowScriptAccess="sameDomain"
                   allowFullScreen="true" />
          </object>
        `;
      } catch (e) {
        console.error(e);
        titleEl.textContent = 'ì˜¤ë¥˜';
        titleDisplay.textContent = 'ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
      }
    }

    loadGame();
  </script>

  <script src="https://unpkg.com/@ruffle-rs/ruffle"></script>
</body>
</html>
